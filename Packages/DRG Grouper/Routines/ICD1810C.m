ICD1810C ;ALB/MRY - DRG RECLASSIFICATION ; 9/8/03 10:24am
 ;;18.0;DRG Grouper;**10**;Oct 13,2000
 ;
 Q
EDCLR(IEN) ; Clear out DRGs in ED. Not correctly use node.
 N FDATA,FLDS,ACTDT,IENS
 S ACTDT=$P($G(^ICD0(IEN,0)),"^",12) Q:'ACTDT
 S IENS=+$O(^ICD0(IEN,66,"B",ACTDT,0)) Q:'IENS
 ;F FLDS=60:1:65 S FDATA(80.166,IENS_","_IEN_",",FLDS)="@"
 ;D FILE^DIE("","FDATA","")
 I $D(^ICD0(IEN,66,IENS,"DRG")) K ^ICD0(IEN,66,IENS,"DRG")
 Q
 ;
EN D BMES^XPDUTL(">>> Beginning DRG Reclassification changes...")
 ;
MDC1 ;
 N ICDLINE,ICDLINE2,DIAG,PROC,ENTRY,DA,DR,DIE,ACTDT
 F ICDLINE=1:1 S X=$T(MDC1P1+ICDLINE^ICD1810D) S ICDPROC=$P(X,";;",2) Q:ICDPROC="EXIT"  D
 . F ICDLINE2=1:1 S PROC=$P(ICDPROC,"^",ICDLINE2) Q:PROC=""  D
 .. S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 ... S DA(1)=ENTRY,DA=1,DR="1///531;2///532",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 ... D EDCLR(ENTRY)
 ;
 F ICDLINE=1:1 S X=$T(MDC1P2+ICDLINE^ICD1810D) S ICDPROC=$P(X,";;",2) Q:ICDPROC="EXIT"  D
 . F ICDLINE2=1:1 S PROC=$P(ICDPROC,"^",ICDLINE2) Q:PROC=""  D
 .. S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 ... S DA(1)=ENTRY,DA=1,DR="1///533;2///534",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 ... D EDCLR(ENTRY)
 ;
 F DIAG=780.02 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="60///429",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///429",DIE=DIE_DA(1)_",66," D ^DIE
 ;
 F DIAG="094.87","430.","431.","432.0",432.1,432.9 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . Q:$P($G(^ICD9(ENTRY,0)),U,2)["K"  S DA=ENTRY,DR="2///"_$P($G(^ICD9(ENTRY,0)),U,2)_"K",DIE="^ICD9(" D ^DIE
 F PROC="02.13",38.01,38.11,38.31,38.41,38.51,38.61,38.81,39.28,39.51,39.52,39.53 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . Q:$P($G(^ICD0(ENTRY,0)),U,2)["K"  S DA=ENTRY,DR="2///"_$P($G(^ICD0(ENTRY,0)),U,2)_"K",DIE="^ICD0(" D ^DIE
 F PROC="02.31","02.32","02.33","02.34","02.35","02.39","02.42","02.43" S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///OS",DIE="^ICD0(" D ^DIE
MDC5 ;
 F DIAG="428.20",428.21,428.22,428.23,"428.30",428.31,428.32,428.33,"428.40",428.41,428.42,428.43 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///A",DIE="^ICD9(" D ^DIE
 ;
 F PROC=37.64,37.67,39.71 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///O7",DIE="^ICD0(" D ^DIE
 F PROC=39.72,39.79 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///O7K",DIE="^ICD0(" D ^DIE
 F PROC=37.64 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///110;2///111",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
 ;
 F PROC=37.94,37.95,"00.51" S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///535;2///515",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
 ;
 F PROC=37.96,37.97,37.98 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///535;2///116",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
 ;
 F PROC="00.52" S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///115;2///116;3///535;4///515",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
 ;
 F PROC="00.54" S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///115;2///535;3///515",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
MDC8 ;
 F ICDLINE=1:1 S X=$T(MDC8P+ICDLINE^ICD1810D) S ICDPROC=$P(X,";;",2) Q:ICDPROC="EXIT"  D
 . F ICDLINE2=1:1 S PROC=$P(ICDPROC,"^",ICDLINE2) Q:PROC=""  D
 .. S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 ... S DA(1)=ENTRY,DA=8,DR="1///537;2///538",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 ... D EDCLR(ENTRY)
 F PROC=81.01,81.31 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=8,DR="1///519;2///520",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
MDC15 ;
 F DIAG=758.9,759.9,795.2 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///23;60///467",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///467",DIE=DIE_DA(1)_",66," D ^DIE
 F DIAG=759.7,759.81,759.89 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///8;60///256",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///256",DIE=DIE_DA(1)_",66," D ^DIE
 F DIAG=759.4 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///6;60///188;61///189;62///190",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///188;61///189;62///190",DIE=DIE_DA(1)_",66," D ^DIE
 F DIAG=779.7 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///1;60///34;61///35;63///@",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///34;61///35;63///@",DIE=DIE_DA(1)_",66," D ^DIE
 F DIAG=759.83 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///19;60///429",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///429",DIE=DIE_DA(1)_",66," D ^DIE
MDC17 ;
 F ICDLINE=1:1 S X=$T(MDC17P+ICDLINE^ICD1810D) S ICDPROC=$P(X,";;",2) Q:ICDPROC="EXIT"  D
 . F ICDLINE2=1:1 S PROC=$P(ICDPROC,"^",ICDLINE2) Q:PROC=""  D
 .. S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 ... S DA(1)=ENTRY,DA=17,DR="1///539;2///406;3///407",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 ... D EDCLR(ENTRY)
 ;
 F ICDLINE=1:1 S X=$T(MDC17D+ICDLINE^ICD1810D) S ICDDIAG=$P(X,";;",2) Q:ICDDIAG="EXIT"  D
 . F ICDLINE2=1:1 S DIAG=$P(ICDDIAG,"^",ICDLINE2) Q:DIAG=""  D
 .. S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 ... S DA=ENTRY,DR="60///539;61///401;62///402;63///403;64///404",DIE="^ICD9(" D ^DIE
 ... S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 ... S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .... S DA=ENTRY,DR="60///539;61///401;62///402;63///403;64///404",DIE=DIE_DA(1)_",66," D ^DIE
 ;
 F DIAG="204.00",204.01,"205.00",205.01,"206.00",206.01,"207.00","208.00",208.01,207.01 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="60///539;61///405;62///473",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///539;61///405;62///473",DIE=DIE_DA(1)_",66," D ^DIE
 ; Correct codes 41.00, 41.02, 40.03
 N DIC,DINUM,X
 F PROC="41.00",41.02,41.03 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=16,DR=".01///@",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . S DA(1)=ENTRY,DA=17,DR=".01///@",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 F PROC="41.00",41.02,41.03 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . K DIC("DR")
 . S DIC="^ICD0("
 . S DIC=DIC_ENTRY_","_"""MDC"""_","
 . S DIC(0)="L"
 . S DIC("DR")="1///481",(X,DINUM)=98 K D0 D FILE^DICN
 . D EDCLR(ENTRY)
MDC23 ;
 F DIAG="V53.01","V53.02","V53.09" S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///1;60///34;61///35",DIE="^ICD9(" D ^DIE
 . S ACTDT=$P($G(^ICD9(ENTRY,0)),"^",16)
 . S DA(1)=ENTRY,ENTRY=+$O(^ICD9(ENTRY,66,"B",ACTDT,0)) I ENTRY D
 .. S DA=ENTRY,DR="60///34;61///35",DIE=DIE_DA(1)_",66," D ^DIE
 F DIAG="V10.48" S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///m",DIE="^ICD9(" D ^DIE
MDCPRE ;
 F PROC=37.51 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="2///Oq",DIE="^ICD0(" D ^DIE
MDC468 ;
 N X,PROC,ENTRY,DIC
 F PROC=50.29 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . K DIC("DR")
 . S DIC="^ICD0("
 . S DIC=DIC_ENTRY_","_"""MDC"""_","
 . S DIC(0)="L"
 . S DIC("DR")="1///170;2///171"
 . S (X,DINUM)=6
 . K D0 D FILE^DICN
 . D EDCLR(ENTRY)
 ;
 F PROC=38.21,77.42,77.43,77.44,77.45,77.46,77.47,77.48,77.49,92.27 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . Q:$P($G(^ICD0(ENTRY,0)),U,2)["z"  S DA=ENTRY,DR="2///"_$P($G(^ICD0(ENTRY,0)),U,2)_"z",DIE="^ICD0(" D ^DIE
 ;
MISC ; NOIS fixes
 N X,PROC,ENTRY,DIC
 F PROC=84.15,40.11 S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . K DIC("DR")
 . S DIC="^ICD0("
 . S DIC=DIC_ENTRY_","_"""MDC"""_","
 . S DIC(0)="L"
 . S:PROC=84.15 DIC("DR")="1///7;2///8" S:PROC=40.11 DIC("DR")="1///120"
 . S:PROC=84.15 (X,DINUM)=1 S:PROC=40.11 (X,DINUM)=5
 . K D0 D FILE^DICN
 . D EDCLR(ENTRY)
 ;
 F DIAG="519.00",519.01,519.02 S ENTRY=+$O(^ICD9("BA",DIAG_" ",0)) I ENTRY D
 . S DA=ENTRY,DR="5///4",DIE="^ICD9(" D ^DIE
 F PROC="00.53" S ENTRY=+$O(^ICD0("BA",PROC_" ",0)) I ENTRY D
 . S DA(1)=ENTRY,DA=5,DR="1///118;2///@;3///@",DIE="^ICD0("_DA(1)_","_"""MDC"""_"," D ^DIE
 . D EDCLR(ENTRY)
 D MES^XPDUTL("")
 D BMES^XPDUTL(">>> DRG Reclassification complete.")
 Q
