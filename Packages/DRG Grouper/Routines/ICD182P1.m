ICD182P1 ;;ALB/EG/JAT - ADD NEW DRG/DIAG/PROC ; 10/16/01 2:21pm
 ;;18.0;DRG Grouper;**2**;Oct 13,2000
 ;
 Q
 ;
ADDDRG  ;-- Add any new DRGs
 N DIC,X,Y,LINE,ICDDRG,DA,DRGX,DRGY,MDC
 D BMES^XPDUTL(">>> Adding New DRGs - Please verify that 12 added")
 I '$D(^ICM(98)) D  Q:Y=-1
 .S DIC="^ICM(",DIC(0)=""
 .S X="PRE",DINUM=98
 .K DO D FILE^DICN
 F LINE=1:1 S X=$T(ADD+LINE) S ICDDRG=$P(X,";;",2) Q:ICDDRG="EXIT"  D
 .S DIC="^ICD(",DIC(0)=""
 .S MDC=$P(ICDDRG,U,2) I MDC="PRE" S MDC=98
 .; check whether #900 field needs an entry of a routine name
 .S DIC("DR")="5///"_MDC_";.06///"_$P(ICDDRG,U,3)_";900///"_$P(ICDDRG,U,5)
 .S X="DRG",X=X_$P(ICDDRG,U)
 .; check for duplicates in case install is being rerun
 .I +$O(^ICD("B",X,0)) Q
 .K DO D FILE^DICN
 .I Y=-1 Q
 .K DIC("DR")
 .S DA(1)=+Y
 .S DIC=DIC_DA(1)_",1,"
 .S DIC(0)="L"
 .S X=$P(ICDDRG,U,4)
 .K DO D FILE^DICN
 .I Y=-1 Q
 . ; displays listing
 .S DRGX=$P(ICDDRG,U),DRGY=$P(ICDDRG,U,4)
 .D MES^XPDUTL("  DRG"_DRGX_"     "_DRGY_" added.")
 Q
 ;
ADD ;New DRGs - descriptions should not exceed 80 char.
 ;;512^PRE^1^SIMULTANEOUS PANCREAS/KIDNEY TRANSPLANT
 ;;513^PRE^1^PANCREAS TRANSPLANT
 ;;514^5^1^CARDIAC DEFIBRILLATOR IMPLANT W/CARDIAC CATH^ICDTLB6
 ;;515^5^1^CARDIAC DEFIBRILLATOR IMPLANT W/O CARDIAC CATH^ICDTLB6
 ;;516^5^1^PERCUTANEOUS CARDIOVASC PROC W AMI^ICDTLB6
 ;;517^5^1^PERC CARDIO PROC W CORONARY ARTERY STENT W/O AMI^ICDTLB6
 ;;518^5^1^PERC CARDIO PROC W/O CORONARY ARTERY STENT OR AMI^ICDTLB6
 ;;519^8^1^CERVICAL SPINAL FUSION W CC^ICDTLB6
 ;;520^8^1^CERVICAL SPINAL FUSION W/O CC^ICDTLB6
 ;;521^20^^ALCOHOL/DRUG ABUSE OR DEPENDENCE W CC^ICDTLB6
 ;;522^20^^ALC/DRUG ABUSE OR DEPEND W REHABILITATION THERAPY W/0 CC^ICDTLB6
 ;;523^20^^ALC/DRUG ABUSE OR DEPEND W/O REHABILITATION THERAPY W/O CC^ICDTLB6
 ;;EXIT
 Q
 ;
ADDPROC ; Add new Operations/Procedures (info taken from Fed Reg Table 6B)
 ;
 N DIC,LINE,SUBLINE,X,Y,ICDPROC,PROC,DESC,OP,SEX,DA,DATA,DRG,DRG1,DRG2,DRG3,DRG4,DRG5,DRG6,ICCHK,CNT S CNT=0
 D BMES^XPDUTL(">>>Adding new Procedures-Please verify that 16 added")
 F LINE=1:1 S X=$T(PROC+LINE) S ICDPROC=$P(X,";;",2) Q:ICDPROC="EXIT"  D
 .Q:ICDPROC["+"
 .S DIC="^ICD0(",DIC(0)="L"
 .S PROC=$P(ICDPROC,U,2) I PROC="" S PROC=$P(ICDPROC,U,3)
 .S DESC=$P(ICDPROC,U,3)
 .; this is the OR column in Table 6B
 .S OP="" I $P(ICDPROC,U,4)="Y" S OP="O"
 .S SEX=$P(ICDPROC,U,5)
 .S DIC("DR")="2///"_OP_";4///"_PROC_";9.5///"_SEX_";10///"_DESC
 .S X=$P(ICDPROC,U)
 .;check for duplicates in case install being rerun
 .S ICCHK=+$O(^ICD0("BA",X_" ",0))
 .I ICCHK I $P($G(^ICD0(ICCHK,0)),U,9)'=1 Q
 .; if duplicates found deal with them
 .I ICCHK I $P($G(^ICD0(ICCHK,0)),U,9)=1 N DIK,DA S DIK="^ICD0(",DA=ICCHK D ^DIK
 .S X=$P(ICDPROC,U)
 .K DO D FILE^DICN
 .I Y=-1 Q
 .S DA(1)=+Y
 .F SUBLINE=1:1 S DATA=$T(PROC+LINE+SUBLINE) Q:DATA'[";;+"  D
 ..K DIC("DR")
 ..S DIC="^ICD0("
 ..S DIC=DIC_DA(1)_","_"""MDC"""_","
 ..S DIC(0)="L"
 ..S DATA=$P(DATA,";;+",2)
 ..S DRG=$P(DATA,U,2)
 ..S (DRG1,DRG2,DRG3,DRG4,DRG5,DRG6)=""
 ..S DRG1=$P(DRG,"~",1) I $P(DRG,"~",2) S DRG2=$P(DRG,"~",2) I $P(DRG,"~",3) S DRG3=$P(DRG,"~",3) I $P(DRG,"~",4) S DRG4=$P(DRG,"~",4) I $P(DRG,"~",5) S DRG5=$P(DRG,"~",5) I $P(DRG,"~",6) S DRG6=$P(DRG,"~",6)
 ..S DIC("DR")="1///"_DRG1_";2///"_DRG2_";3///"_DRG3_";4///"_DRG4_";5///"_DRG6_";6///"_DRG6
 ..S X=$P(DATA,U)
 ..S DINUM=X
 ..K DO D FILE^DICN
 .S CNT=CNT+1
 D BMES^XPDUTL(">>> "_CNT_" procedures were added")
 Q
PROC ;New Operations/Procedures
 ;;37.28^^INTRACARDIAC ECHOCARDIOGRAPHY^N^
 ;;44.32^^PERCUTANEOUS [ENDOSCOPIC] GASTROJEJUNOSTOMY^Y^
 ;;+6^154~155~156
 ;;+7^201
 ;;+10^288
 ;;+17^400~406~407
 ;;67.51^^TRANSABDOMINAL CERCLAGE OF CERVIX^Y^
 ;;+13^360
 ;;+14^372~373
 ;;+21^442~443
 ;;+24^486
 ;;67.59^^OTHER REPAIR OF INTERNAL CERVICAL OS^Y^
 ;;+13^360
 ;;+14^372~373
 ;;+21^442~443
 ;;+24^486
 ;;75.38^^FETAL PULSE OXIMETRY^N^
 ;;81.30^^REFUSION OF SPINE, NOS^Y^
 ;;+1^4
 ;;+8^497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.31^^REFUSION OF ATLAS-AXIS SPINE^Y^
 ;;+1^4
 ;;+8^497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.32^^REFUSION OF OTHER CERVICAL SPINE,ANTERIOR TECHNIQU^Y^
 ;;+1^4
 ;;+8^496~519~520
 ;;+21^442~443
 ;;+24^486
 ;;81.33^^REFUSION OF OTHER CERVICAL SPINE,POSTERIOR TECHNIQ^Y^
 ;;+1^4
 ;;+8^496~519~520
 ;;+21^442~443
 ;;+24^486
 ;;81.34^REFUSION OF DORSAL & DORSOLUMBAR SPINE, ANTERIOR^REFUSION OF DORSAL AND DORSOLUMBAR SPINE, ANTERIOR TECHNIQUE^Y^
 ;;+1^4
 ;;+8^496~497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.35^REFUSION OF DORSAL & DORSOLUMBAR SPINE, POSTERIOR^REFUSION OF DORSAL AND DORSOLUMBAR SPINE, POSTERIOR TECHNIQUE^Y^
 ;;+1^4
 ;;+8^496~497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.36^REFUSION OF LUMBAR & LUMBOSACRAL SPINE, ANTERIOR^REFUSION OF LUMBAR AND LUMBOSACRAL SPINE, ANTERIOR TECHNIQUE^Y^
 ;;+1^4
 ;;+8^496~497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.37^REFUSION OF LUMBAR & LUMBOSACRAL SPINE, LATERAL^REFUSION OF LUMBAR AND LUMBOSACRAL SPINE, LATERAL TRANSVERSE PROCESS TECHNIQUE^Y^
 ;;+1^4
 ;;+8^496~497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.38^REFUSION OF LUMBAR & LUMBOSACRAL SPINE, POSTERIOR^REFUSION OF LUMBAR AND LUMBOSACRAL SPINE, POSTERIOR TECHNIQUE^Y^
 ;;+1^4
 ;;+8^496~497~498
 ;;+21^442~443
 ;;+24^486
 ;;81.39^^REFUSION OF SPINE, NOT ELSEWHERE CLASSIFIED^Y^
 ;;+1^4
 ;;+8^497~498
 ;;+21^442~443
 ;;+24^486
 ;;97.44^^NONOPERATIVE REMOVAL OF HEART ASSIST SYSTEM^N^
 ;;EXIT
 Q
