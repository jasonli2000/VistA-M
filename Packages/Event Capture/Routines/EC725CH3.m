EC725CH3 ;ALB/GTS/JAP - EC National Procedure Update ;Feb 13, 1997
 ;;2.0; EVENT CAPTURE ;**9**;8 May 96
 ;**  Post-Init in a KIDS build for EC*2.0*9 modifies file #725
 ;
ADD ;** Add National Procedures
 ;  ECXX is in format: NATL#^NAME^
 N ECX,ECXX,ECDA,COUNT,DIC,DA,DIK,X,Y,DIR,DIRUT,JJ,SS,DUOUT
 S COUNT=0
 D MES^XPDUTL(" ")
 I $E(IOST)="C" D  Q:'Y
 .S SS=22-$Y F JJ=1:1:SS W !
 .K X,Y
 .S DIR(0)="E" W ! D ^DIR K DIR
 D MES^XPDUTL(" ")
 D MES^XPDUTL(" Adding new National Procedures to EC National Procedure File (#725)...")
 D MES^XPDUTL(" ")
 ;
 S ECDA=489
 F ECX=1:1 S ECXX=$P($T(NEW+ECX),";;",2) Q:ECXX="QUIT"  DO
 .S ECDA=ECDA+1
 .S ^EC(725,ECDA,0)=$P(ECXX,"^",2)_"^"_$P(ECXX,"^",1)_"^"
 .S DA=ECDA,DIK(1)=".01",DIK="^EC(725,"
 .D EN^DIK
 .K DA,DIK
 .S DA=ECDA,DIK(1)="1",DIK="^EC(725,"
 .D EN^DIK,MESS
 .K DA,DIK
 .S $P(^EC(725,0),"^",4)=$P(^EC(725,0),"^",4)+1
 .S COUNT=COUNT+1
 D ADD^EC725CH4
 D MES^XPDUTL(" ")
 D MES^XPDUTL(" Done... "_COUNT_" new entries added to EC NATIONAL PROCEDURE File (#725).")
 D MES^XPDUTL(" ")
 Q
 ;
CLEAN ;** Delete any new entries added -- backout patch EC*2.0*9
 ;
 N ECX,ECXX,ECDA,COUNT,DIC,DA,DIK,X,Y,DIR,JJ,SS,DIRUT,DUOUT
 S COUNT=0
 D MES^XPDUTL(" ")
 D MES^XPDUTL(" This subroutine will delete only those entries in file #725,")
 D MES^XPDUTL(" EC NATIONAL PROCEDURE, which were added by patch EC*2.0*9.")
 D MES^XPDUTL(" ")
 I $E(IOST)="C" D  Q:'Y
 .S SS=22-$Y F JJ=1:1:SS W !
 .K X,Y
 .S DIR(0)="E" W ! D ^DIR K DIR
 D MES^XPDUTL(" ")
 D MES^XPDUTL(" Deleting...")
 D MES^XPDUTL(" ")
 ;
 F ECX=1:1 S ECXX=$P($T(NEW+ECX),";;",2) Q:ECXX="QUIT"  D
 .S DIC="^EC(725,",DIC(0)="MX",X=$P(ECXX,"^",1) D ^DIC
 .I +Y>489 D
 ..S DIK=DIC,DA=+Y D ^DIK S COUNT=COUNT+1
 ..D MES^XPDUTL(" Entry #"_DA_" deleted...") K Y
 D CLEAN^EC725CH4
 D MES^XPDUTL(" ")
 D MES^XPDUTL(" Done... "_COUNT_" entries deleted from EC NATIONAL PROCEDURE File (#725).")
 D MES^XPDUTL(" ")
 Q
 ;
MESS ;** Add message
 N ECXADMSG
 S ECXADMSG=" "_$P(ECXX,"^",2)_" ("_$P(ECXX,"^",1)_") without CPT code -- added..."
 D MES^XPDUTL(ECXADMSG)
 Q
 ;
NEW ;National Procedures to add- example ;;NATIONAL NUMBER^NAME^CPT
 ;;OB001^OBS - MEDICINE^
 ;;OB002^OBS - SURGERY^
 ;;OB003^OBS - PSYCH^
 ;;OB004^OBS - NEUROLOGY^
 ;;OB005^OBS - REHAB MED^
 ;;OB006^OBS - BLIND REHAB^
 ;;OB007^OBS - SCI SPINAL CORD INJ^
 ;;BAA00^BLIND REHAB - OPEN^ 
 ;;BAA10^BLIND REHAB - OPEN^ 
 ;;BAA20^BLIND REHAB - OPEN^ 
 ;;BAA90^BLIND REHAB - OPEN^ 
 ;;BBA00^BLIND REHAB - OPEN^  
 ;;BBA10^BLIND REHAB - OPEN^ 
 ;;BBA20^BLIND REHAB - OPEN^ 
 ;;BBA90^BLIND REHAB - OPEN^ 
 ;;BCA00^BLIND REHAB - OPEN^ 
 ;;BCA10^BLIND REHAB - OPEN^ 
 ;;BCA20^BLIND REHAB - OPEN^ 
 ;;BCA90^BLIND REHAB - OPEN^ 
 ;;BDA00^BLIND REHAB - OPEN^ 
 ;;BDA10^BLIND REHAB - OPEN^ 
 ;;BDA20^BLIND REHAB - OPEN^ 
 ;;BDA90^BLIND REHAB - OPEN^ 
 ;;BRH00^BLIND REHABGEN^ 
 ;;BRH10^BLIND REHAB 10^ 
 ;;BRH20^BLIND REHAB 20^ 
 ;;BRH90^BLIND REHABOTHER^ 
 ;;CBA00^SPINAL CORD INJURYOPEN^ 
 ;;CBA10^SPINAL CORD INJURYOPEN^ 
 ;;CBA20^SPINAL CORD INJURYOPEN^ 
 ;;CBA90^SPINAL CORD INJURYOPEN^ 
 ;;CCA00^SPINAL CORD INJURYOPEN^ 
 ;;CCA10^SPINAL CORD INJURYOPEN^ 
 ;;CCA20^SPINAL CORD INJURYOPEN^ 
 ;;CCA90^SPINAL CORD INJURYOPEN^ 
 ;;CLC00^SCI LUMBAR CORDGEN^ 
 ;;CLC10^SCI LUMBAR CORDGEN^ 
 ;;CLC20^SCI LUMBAR CORDGEN^ 
 ;;CLC90^SCI LUMBAR CORDOTH^ 
 ;;CSC00^SCI SACRAL CORDGEN^ 
 ;;CSC10^SCI SACRAL CORDGEN^ 
 ;;CSC20^SCI SACRAL CORDGEN^ 
 ;;CSC90^SCI SACRAL CORDOTH^ 
 ;;CSI00^SPINAL CORD INJURYGEN^ 
 ;;CSI10^SPINAL CORD INJURY 10^ 
 ;;CSI20^SPINAL CORD INJURY 20^ 
 ;;CSI90^SCI YOTHER^ 
 ;;CTC00^SCI THORACIC CORDGEN^ 
 ;;CTC10^SCI THORACIC CORDGEN^ 
 ;;CTC20^SCI THORACIC CORDGEN^ 
 ;;CTC90^SCI THORACIC CORDOTH^ 
 ;;GAA00^GEC - OPEN^ 
 ;;GAA10^GEC - OPEN^ 
 ;;GAA20^GEC - OPEN^ 
 ;;GAA90^GEC - OPEN^ 
 ;;GBA00^GEC - OPEN^ 
 ;;GBA10^GEC - OPEN^ 
 ;;GBA20^GEC - OPEN^ 
 ;;GBA90^GEC - OPEN^ 
 ;;GCA00^GEC - OPEN^ 
 ;;GCA10^GEC - OPEN^ 
 ;;GCA20^GEC - OPEN^ 
 ;;GCA90^GEC - OPEN^ 
 ;;GCN00^GEC-COM NURSG HOMEGEN^ 
 ;;GCN10^GEC-COM NURSG HOMEGEN^ 
 ;;GCN20^GEC-COM NURSG HOMEGEN^ 
 ;;GCN90^GEC-COM NURSG HOMEOTH^ 
 ;;GDA00^GEC - OPEN^ 
 ;;GDA10^GEC - OPEN^ 
 ;;GDA20^GEC - OPEN^ 
 ;;GDA90^GEC - OPEN^ 
 ;;GDO00^GEC - DOMICILLARYGEN^  
 ;;GDO20^GEC - DOMICILLARYGEN^
 ;;GDO90^GEC - DOMICILLARYOTHER^
 ;;GEA00^GEC - OPEN^
 ;;GEA10^GEC - OPEN^
 ;;GEA20^GEC - OPEN^
 ;;GEA90^GEC - OPEN^
 ;;GER00^GERIATRICS GEN^
 ;;GER10^GERIATRICS 10^
 ;;GER20^GERIATRICS 20^
 ;;GER90^GERIATRICSOTHER^
 ;;GFA00^GEC - OPEN^
 ;;GFA10^GEC - OPEN^
 ;;GFA20^GEC - OPEN^
 ;;GFA90^GEC - OPEN^
 ;;GGA00^GEC - OPEN^
 ;;GGA10^GEC - OPEN^
 ;;GGA20^GEC - OPEN^
 ;;GGA30^GEC - OPEN^
 ;;GNH00^GEC - NURSINGHOMEGEN^
 ;;GNH10^GEC - NURSINGHOMEGEN^
 ;;GNH20^GEC - NURSINGHOMEGEN^
 ;;GNH90^GEC - NURSINGHOMEOTHER^
 ;;MAA00^MEDICINE - OPEN^
 ;;MAA10^MEDICINE - OPEN^
 ;;MAA20^MEDICINE - OPEN^
 ;;MAA90^MEDICINE - OPEN^
 ;;MBA00^MEDICINE - OPEN^
 ;;MBA10^MEDICINE - OPEN^
 ;;MBA20^MEDICINE - OPEN^
 ;;MBA90^MEDICINE - OPEN^
 ;;MCA00^MEDICINE - OPEN^
 ;;MCA10^MEDICINE - OPEN^
 ;;MCA20^MEDICINE - OPEN^
 ;;MCA90^MEDICINE - OPEN^
 ;;MCV00^MEDICINE CRDIOVASCLRGEN^
 ;;MCV10^MEDICINE CRDIOVASCLRGEN^
 ;;MCV20^MEDICINE CRDIOVASCLRGEN^
 ;;MCV90^MEDICINE CRDIOVASCLROTH^
 ;;MDA00^MEDICINE - OPEN^
 ;;MDA10^MEDICINE - OPEN^
 ;;MDM00^MED DIABETES MELITISGEN^
 ;;MDM10^MEDDIABMELITIS INSULIN^
 ;;MDM20^MEDDIABHYPOGLYCEMIC^
 ;;MDM90^MED DIABETESOTHER^
 ;;MHA00^MEDICINE - OPEN^
 ;;MHA10^MEDICINE - OPEN^
 ;;MHA20^MEDICINE - OPEN^
 ;;MHA90^MEDICINE - OPEN^
 ;;MIM00^MED IMMUNE DISSEGEN^
 ;;MIM10^MED IMMUNE DISSEGEN^
 ;;MIM20^MED IMMUNE DISSEGEN^
 ;;MIM90^MED IMM DISEASEOTH^
 ;;MIN00^MED INFECT DISEASEGEN^
 ;;MIN10^MED INFECT DISEASEGEN^
 ;;MIN20^MED INFECT DISEASEGEN^
 ;;MIN90^MED INFECT DISEASEOTH^
 ;;MLF00^MED LIVER FUNC DIS RGEN^
 ;;MLF10^MED LIVER FUNC DSORDRGEN^
 ;;MLF20^MED LIVER FUNC DSORDRGEN^
 ;;MLF90^MED LIVER FUNC DSORDROTH^
 ;;MPF00^MED PULM FAIL DISRGEN^
 ;;MPF10^MED PULM FAIL DISRGEN^
 ;;MPF20^MED PULM FAIL DISRGEN^
 ;;MPF90^MED PULM FAIL DISROTH^
 ;;MRF00^MED RENL FAIL DISRGEN^
 ;;MRF10^MED RENL FAIL DISRGEN^
 ;;MRF20^MED RENL FAIL DISRGEN^
 ;;MRF90^MED RENL FAIL DISROTH^
 ;;NAA00^NEUROLOGY - OPEN^
 ;;NAA10^NEUROLOGY - OPEN^
 ;;NAA20^NEUROLOGY - OPEN^
 ;;NAA90^NEUROLOGY - OPEN^
 ;;NBA00^NEUROLOGY - OPEN^
 ;;NBA10^NEUROLOGY - OPEN^
 ;;NBA20^NEUROLOGY - OPEN^
 ;;NBA90^NEUROLOGY - OPEN^
 ;;NCA00^NEUROLOGY - OPEN^
 ;;NCA10^NEUROLOGY - OPEN^
 ;;NCA20^NEUROLOGY - OPEN^
 ;;NCA90^NEUROLOGY - OPEN^
 ;;NCT00^NEURO CEREB TUMORGEN^
 ;;NCT10^NEURO CEREB TUMORGEN^
 ;;NCT20^NEURO CEREB TUMORGEN^
 ;;NCT90^NEURO CEREB TUMOROTH^
 ;;NDA00^NEUROLOGY - OPEN^
 ;;NDA10^NEUROLOGY - OPEN^
 ;;NDA20^NEUROLOGY - OPEN^
 ;;NDA90^NEUROLOGY - OPEN^
 ;;NEA00^NEUROLOGY - OPEN^
 ;;NEA10^NEUROLOGY - OPEN^
 ;;NEA20^NEUROLOGY - OPEN^
 ;;NEA90^NEUROLOGY - OPEN^
 ;;NEP00^NEUR EPILPTIC DISORDRGEN^
 ;;NEP10^NEUR EPIL DISORDRGEN^
 ;;NEP20^NEUR EPIL DISORDRGEN^
 ;;NEP90^NEUR EPIL DISORDROTH^
 ;;NEU00^NEUROGEN^
 ;;NEU10^NEURO 10^
 ;;NEU20^NEURO 20^
 ;;NEU90^NEUROOTHER^
 ;;NFA00^NEUROLOGY - OPEN^
 ;;NFA10^NEUROLOGY - OPEN^
 ;;NFA20^NEUROLOGY - OPEN^
 ;;NFA90^NEUROLOGY - OPEN^
 ;;NGA00^NEUROLOGY - OPEN^
 ;;NGA10^NEUROLOGY - OPEN^
 ;;NGA20^NEUROLOGY - OPEN^
 ;;NGA90^NEUROLOGY - OPEN^
 ;;NGB00^NEUSTATP GUILL BARRGEN^
 ;;NGB10^NEUSTATP GUILL BARRGEN^
 ;;NGB20^NEUSTATP GUILL BARRGEN^
 ;;NGB90^NEUSTATP GUILL BARROTH^
 ;;NMS00^NEUROMULTSCLEROSISGEN^
 ;;NMS10^NEUROMULTSCLEROSISGEN^
 ;;NMS20^NEUROMULTSCLEROSISGEN^
 ;;NMS90^NEUROMULTSCLEROSISOTH^
 ;;NMV00^NEUR MOV DISORDERGEN^
 ;;NMV10^NEUR MOV DISORDERGEN^
 ;;NMV20^NEUR MOV DISORDERGEN^
 ;;NMV90^NEUR MOV DISORDEROTH^
 ;;PAA00^PSI - ALCOHOL ABUSEGEN^
 ;;PAA10^PSI - ALCOHOL ABUSEGEN^
 ;;PAA20^PSI - ALCOHOL ABUSEGEN^
 ;;PAA30^PSI - ALCOHOL ABUSEGEN^
 ;;PAA90^PSI - ALCOHOL ABUSEOTHER^
 ;;PBA00^PSI - OPEN^
 ;;PBA10^PSI - OPEN^
 ;;PBA20^PSI - OPEN^
 ;;PBA90^PSI - OPEN^
 ;;PCA00^PSI - OPEN^
 ;;PCA10^PSI - OPEN^
 ;;PCA20^PSI - OPEN^
 ;;PCA90^PSI - OPEN^
 ;;PDA00^PSI - OPEN^
 ;;PDA10^PSI - OPEN^
 ;;PDA20^PSI - OPEN^
 ;;PDA90^PSI - OPEN^
 ;;PDD00^PSI DEPRSSVE DISORDERGEN^
 ;;PDD10^PSI DEPRSSVE DISORDERGEN^
 ;;PDD20^PSI DEPRSSVE DISORDERGEN^
 ;;PDD30^PSI DEPRSSVE DISORDERGEN^
 ;;PDD90^PSI DEPRSSVE DISORDEROTH^
 ;;QUIT
