EC725CH6 ;ALB/GTS/JAP - EC National Procedure Update; 5/8/98
 ;;2.0; EVENT CAPTURE ;**12**;8 May 96
 ;
 ;this routine is used as a post-init in a KIDS build 
 ;to modify the EC National Procedure file #725
 ;
NAMECHG ;* change national procedure names
 ;
 ;  ECXX is in format:
 ;   NATIONAL NUMBER^NEW NAME
 ;
 N ECX,ECXX,ECDA,DA,DR,DIC,DIE,X,Y
 D MES^XPDUTL(" ")
 D BMES^XPDUTL("Changing names in EC NATIONAL PROCEDURE File (#725)...")
 D MES^XPDUTL(" ")
 F ECX=1:1 S ECXX=$P($T(CHNG+ECX),";;",2) Q:ECXX="QUIT"  D
 .I $D(^EC(725,"D",$P(ECXX,U,1))) D
 ..S ECDA=+$O(^EC(725,"D",$P(ECXX,U,1),0))
 ..I $D(^EC(725,ECDA,0)) D
 ...S DA=ECDA,DR=".01////^S X=$P(ECXX,U,2)",DIE="^EC(725," D ^DIE
 ...D MES^XPDUTL(" ")
 ...D BMES^XPDUTL("   Entry #"_ECDA_" for "_$P(ECXX,U,1))
 ...D BMES^XPDUTL("   ...field (#.01) updated to  "_$P(ECXX,U,2)_".")
 .I '$D(^EC(725,"D",$P(ECXX,U,1))) D
 ..D MES^XPDUTL(" ")
 ..D BMES^XPDUTL("Can't find entry for "_$P(ECXX,U,1))
 ..D BMES^XPDUTL("...field (#.01) not updated.")
 Q
 ;
CHNG ;name changes
 ;;CH001^OTHER DIAG ASS'MT-PC
 ;;CH002^SPA SPIRITUAL ASSESS-PC
 ;;CH003^SEMI STRUCT INTERVIEW-PC
 ;;CH004^ADMISSION-PC
 ;;CH005^B/NA ADMISSION-PC
 ;;CH006^SI/CRITICAL CARE-PC
 ;;CH007^DNR CONSULTATION-PC
 ;;CH008^FOLLOW UP DNR-PC
 ;;CH009^OTHER SACRAMENT/RITES-PC
 ;;CH010^POST OPERATIVE VISIT-PC
 ;;CH011^PRAYER REQUEST-PC
 ;;CH012^PRE OPERATIVE VISIT-PC
 ;;CH013^SACRAMENT OF THE SICK-PC
 ;;CH014^WORSHIP-PC
 ;;CH015^CONSULTS-PC
 ;;CH016^DO NOT USE - FAMILY COUNSELING
 ;;CH017^STAFF COUNSELING-PC
 ;;CH018^ADDICT DRG&ALC IND-PC
 ;;CH019^AIDS/HIV CNSL FAMILY-PC
 ;;CH020^AIDS/HIV CNSL IND-PC
 ;;CH021^ALCOHOL ADDICTION-PC
 ;;CH022^ALIENAT CHURCH-PC
 ;;CH023^ANGER-PC
 ;;CH024^ANXIETY REDUCTION-PC
 ;;CH025^SCRIPTURE & THEOLOGY-PC
 ;;CH026^UTILS CLSD CIRC-PC
 ;;CH027^CONCEPT OF DEATH-PC
 ;;CH028^CONFLICT RESOLUTION-PC
 ;;CH029^DENOMIN ALIENATION-PC
 ;;CH030^DRUG ADDICTION-PC
 ;;CH031^DYING-PC
 ;;CH032^ETHICS/HOSPITAL QA-PC
 ;;CH033^ETHNIC COMM ALIENATN-PC
 ;;CH034^FEAR-PC
 ;;CH035^FINANCIAL-PC
 ;;CH036^FORGIVENESS-PC
 ;;CH037^GAMBL ADDICT-PC
 ;;CH038^GOD ALIENATION-PC
 ;;CH039^GRIEF-PC
 ;;CH040^GUILT-PC
 ;;CH041^HLTH PROMOT/WELLNESS-PC
 ;;CH042^INSIGHT PROMOTION-PC
 ;;CH043^MEANS TEST-PC
 ;;CH044^MED PLAN COOP-PC
 ;;CH045^ONCO COUNSEL-PC
 ;;CH046^OTHER VISITS-PC
 ;;CH047^PSYCHOSIS REDUCT-PC
 ;;CH048^PURPOSE & MEANING-PC
 ;;CH049^RADIO/TV UTILIZATION-PC
 ;;CH050^REALITY ORIENTATION-PC
 ;;CH051^RENAL DIAL FAM CNSL-PC
 ;;CH052^SEXUAL ADDICTION-PC
 ;;CH053^SIGNIFICANT OTHER-PC
 ;;CH054^SOCIAL SKILL ENHANCMT-PC
 ;;CH055^SPIRITUAL GROWTH-PC
 ;;CH056^STALMT SPIRIT GROWTH-PC
 ;;CH057^SUICIDE-PC
 ;;CH058^THEODICY/UNFAIRNESS-PC
 ;;CH059^VIS AIDS UTILIZ-PC
 ;;CH060^FAMILY COUNSEL-PC
 ;;CH061^DESPAIR/HOPELESSNESS-PC
 ;;CH062^COMMUNION-PC
 ;;CH063^COMPUTER SPIR ASS'MT-PC
 ;;CH064^FIFTH STEP-PC
 ;;CH065^FUNERAL-PC
 ;;CH066^PATIENT ED-ADVNCD DIR-PC
 ;;CH067^GROUP SPIRITUALITY ED-PC
 ;;CH068^SEXUALITY-PC
 ;;CH069^SPIRITUAL ASSESSMENT-PC
 ;;CH070^ADVANCE DIRECT. CONSULT-PC
 ;;CH071^CONSULTS,OP-PC
 ;;CH072^DO NOT USE - FAMILY COUNSEL W/O PT
 ;;CH073^ADDICT DRG&ALC GRP-PC
 ;;CH074^AIDS/HIV CNSL FAM WPT-PC
 ;;CH075^FAM. COUNSEL W/O PT-PC
 ;;CH076^HOME VISITS-PC
 ;;SP185^99347 E&M, HOME CARE EST
 ;;SP186^99348 E&M, HOME CARE EST
 ;;SP187^99349 E&M, HOME CARE EST
 ;;QUIT
 ;
ADDPROC ;* add national procedures
 ;
 ;  ECXX is in format:
 ;   NAME^NATIONAL NUMBER^CPT CODE
 ;
 N ECX,ECXX,ECDINUM,NAME,CODE,CPT,COUNT,X,Y,DIC,DIE,DA,DR,DLAYGO,DINUM
 D MES^XPDUTL(" ")
 D BMES^XPDUTL("Adding new procedures to EC NATIONAL PROCEDURE File (#725)...")
 D MES^XPDUTL(" ")
 S ECDINUM=$O(^EC(725,9999),-1),COUNT=$P(^EC(725,0),"^",4)
 F ECX=1:1 S ECXX=$P($T(NEW+ECX),";;",2) Q:ECXX="QUIT"  D
 .S NAME=$P(ECXX,"^",1),CODE=$P(ECXX,"^",2),CPT=$P(ECXX,"^",3)
 .I '$D(^EC(725,"D",CODE)) D
 ..S X=NAME,ECDINUM=ECDINUM+1,DINUM=ECDINUM,DIC(0)="L",DLAYGO=725,DIC="^EC(725,",DIC("DR")="1////^S X=CODE;4////^S X=CPT"
 ..D FILE^DICN
 ..I +Y>0 D
 ...S COUNT=COUNT+1
 ...D MES^XPDUTL(" ")
 ...D BMES^XPDUTL("   Entry #"_+Y_" for "_$P(Y,"^",2)_" ("_CODE_")")
 ...D BMES^XPDUTL("   ...successfully added.")
 ..I Y=-1 D
 ...D MES^XPDUTL(" ")
 ...D BMES^XPDUTL("ERROR when attempting to add "_NAME_" ("_CODE_")")
 ..K Y
 S $P(^EC(725,0),"^",4)=COUNT,X=$O(^EC(725,999999),-1),$P(^EC(725,0),"^",3)=X
 Q
 ;
NEW ;national procedures to add
 ;;BOUNDARY CONFUSION-PC^CH077^90804
 ;;END OF LIFE-PC^CH078^90804
 ;;GERIATRIC ISSUES-PC^CH079^90804
 ;;MENTAL HEALTH-PC^CH080^90804
 ;;PTSD-PC^CH081^90804
 ;;SPIRITUAL DISTRESS-PC^CH082^90804
 ;;BEREAVEMENT-PC^CH083^90804
 ;;POST DEATH FAM CNSL-PC^CH084^90804
 ;;QUIT
