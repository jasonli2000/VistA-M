EC725U08 ;ALB/GTS/JAP/JAM - EC National Procedure Update;10/27/00
 ;;2.0; EVENT CAPTURE ;**26**;8 May 96
 ;
 ;this routine is used as a post-init in a KIDS build 
 ;to modify the EC National Procedure file #725
 ;
ADDPROC ;* add remaining national procedures code
 ;
 ;  ECXX is in format:
 ;   NAME^NATIONAL NUMBER^CPT CODE^FIRST NATIONAL NUMBER SEQUENCE
 ;   LAST NATIONAL NUMBER SEQUENCE
 ;
 N ECX,ECXX,ECDINUM,NAME,CODE,CPT,COUNT,X,Y,DIC,DIE,DA,DR,DLAYGO,DINUM
 N ECADD,ECBEG,ECEND,CODX,NAMX,ECSEQ,LIEN,STR,CPTN
 S ECDINUM=$O(^EC(725,9999),-1),COUNT=$P(^EC(725,0),U,4)
 F ECX=1:1 S ECXX=$P($T(NEW+ECX),";;",2) Q:ECXX="QUIT"  D
 .S NAME=$P(ECXX,U,1),CODE=$P(ECXX,U,2),CPTN=$P(ECXX,U,3),CODX=CODE
 .S CPT=""
 .I CPTN'="" S CPT=$$FIND1^DIC(81,"","X",CPTN) I +CPT<1 D  Q
 ..S STR="   CPT code "_CPTN_" not a valid code in CPT File."
 ..D MES^XPDUTL(" ")
 ..D BMES^XPDUTL("   ["_CODE_"] "_STR)
 .S ECBEG=$P(ECXX,U,4),ECEND=$P(ECXX,U,5),NAMX=NAME
 .I ECBEG="" S X=NAME D FILPROC Q
 .F ECSEQ=ECBEG:1:ECEND D
 ..S ECADD="000"_ECSEQ,ECADD=$E(ECADD,$L(ECADD)-2,$L(ECADD))
 ..S NAME=NAMX_ECADD,X=NAME,CODE=CODX_ECADD
 ..D FILPROC
 S $P(^EC(725,0),U,4)=COUNT,X=$O(^EC(725,999999),-1),$P(^EC(725,0),U,3)=X
 Q
 ;
FILPROC ;File national procedures
 I '$D(^EC(725,"D",CODE)) D
 .S ECDINUM=ECDINUM+1,DINUM=ECDINUM,DIC(0)="L",DLAYGO=725,DIC="^EC(725,"
 .S DIC("DR")="1////^S X=CODE;4////^S X=CPT"
 .D FILE^DICN
 .I +Y>0 D
 ..S COUNT=COUNT+1
 ..D MES^XPDUTL(" ")
 ..S STR="   Entry #"_+Y_" for "_$P(Y,U,2)
 ..S STR=STR_$S(CPT'="":" [CPT: "_CPT_"]",1:"")_" ("_CODE_")"_" "_NAME
 ..D BMES^XPDUTL(STR_"  ...successfully added.")
 .I Y=-1 D
 ..D MES^XPDUTL(" ")
 ..D BMES^XPDUTL("ERROR when attempting to add "_NAME_" ("_CODE_")")
 I $D(^EC(725,"DL",CODE)) D
 .S LIEN=$O(^EC(725,"DL",CODE,""))
 .D MES^XPDUTL(" ")
 .D BMES^XPDUTL("   Your site has a local procedure (entry #"_LIEN_") in File #725")
 .D BMES^XPDUTL("   which uses "_CODE_" as its National Number.")
 .D BMES^XPDUTL("   Please inactivate this local procedure.")
 .K Y
 Q
NEW ;national procedures to add;;descript^nation #^CPT code^beg seq^end seq
 ;;V5220 HEARING AID, BICROS, BTE^SP386^V5220
 ;;V5230 HEARING AID, BICROS, GLASSES^SP387^V5230
 ;;V5240 DISPENSING FEE, BICROS^SP388^V5240
 ;;V5299 HEARING AID, MISCELLANEOUS SERVICE^SP389^V5299
 ;;V5299 EAR IMPRESSION, EACH^SP390^V5299
 ;;V5299 OUTCOME VERIFICATION, QUESTIONNAIRE^SP391^V5299
 ;;V5014 ADJUST, DIGITAL PROGRAM, OR RE-PROGRAM^SP392^V5014
 ;;V5050 HEARING AID, MONAURAL, CIC^SP393^V5050
 ;;V5050 HEARING AID, MONAURAL, ITC^SP394^V5050
 ;;V5050 HEARING AID, DIGITALLY PROGRAM, MON, CIC^SP395^V5050
 ;;V5050 HEARING AID, DIGITALLY PROGRAM, MON, ITC^SP396^V5050
 ;;V5050 HEARING AID, DIGITALLY PROGRAM, MON, ITE^SP397^V5050
 ;;V5060 HEARING AID, DIGITALLY PROGRAM, MON, BTE^SP398^V5060
 ;;V5130 HEARING AID, BINAURAL, CIC^SP399^V5130
 ;;V5130 HEARING AID, BINAURAL, ITC^SP400^V5130
 ;;V5130 HEARING AID, DIGITALLY PROGRAM BIN, CIC^SP401^V5130
 ;;V5130 HEARING AID, DIGITALLY PROGRAM BIN, ITC^SP402^V5130
 ;;V5130 HEARING AID, DIGITALLY PROGRAM BIN, ITE^SP403^V5130
 ;;V5140 HEARING AID, DIGITALLY PROGRAM BIN, BTE^SP404^V5140
 ;;V5050 HEARING AID, DIGITAL, MONAURAL, CIC^SP405^V5050
 ;;V5050 HEARING AID, DIGITAL, MONAURAL, ITC^SP406^V5050
 ;;V5050 HEARING AID, DIGITAL, MONAURAL, ITE^SP407^V5050
 ;;V5060 HEARING AID, DIGITAL, MONAURAL, BTE^SP408^V5060
 ;;V5130 HEARING AID, DIGITAL, BINAURAL, CIC^SP409^V5130
 ;;V5130 HEARING AID, DIGITAL, BINAURAL, ITC^SP410^V5130
 ;;V5130 HEARING AID, DIGITAL, BINAURAL, ITE^SP411^V5130
 ;;V5140 HEARING AID, DIGITAL, BINAURAL, BTE^SP412^V5140
 ;;V5299 EAR MOLD, EACH^SP413^V5299
 ;;V5299 HEARING AID BATTEIRES^SP414^V5299
 ;;V5299 HEARING AID SUPPLIES/ACCESSORIES^SP415^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, TELEPHONE AMP^SP416^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, ALERTING^SP417^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, TELEVISION AMP^SP418^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, CAPTION DECODER^SP419^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, TDD^SP420^V5299
 ;;V5299 ASSISTIVE LISTENING DEVICE, UNSPECIFIED^SP421^V5299
 ;;L8614 COCHLEAR IMPLANT DEVICE/SYSTEM^SP422^L8614
 ;;L8619 COCHLEAR IMPLANT EXT SPEECH PROCESSOR, REPL^SP423^L8619
 ;;V5336 REPAIR/MOD OF AUGMENT COMM SYSTEM OR DEVICE^SP424^V5336
 ;;V5362 SPEECH SCREENING^SP425^V5362
 ;;V5363 LANGUAGE SCREENING^SP426^V5363
 ;;V5364 DYSPHAGIA SCREENING^SP427^V5364
 ;;L8500 ARTIFICIAL LARYNX, ANY TYPE^SP428^L8500
 ;;L8501 TRACHEOSTOMY SPEAKING VALVE^SP429^L8501
 ;;L8618 PALATE IMPLANT^SP430^L8618
 ;;A4481 TRACHEOSTOMA FILTER^SP431^A4481
 ;;A4621 TRACHEOSTOMY MASK OR COLLAR^SP432^A4621
 ;;A4623 TRACHEOSTOMY OR LARYNGETOMY TUBE^SP433^A4623
 ;;A4624 TRACHEOSTOMY, INNER CANNULA (REPL ONLY)^SP434^A4623
 ;;A4625 TRACHEOSTOMY CARE KIT FOR NEW TRACHEOSTOMY^SP435^A4625
 ;;A4625 TRACHEOSTOMY CARE KIT FOR EST TRACHEOSTOMY^SP436^A4625
 ;;V5299 VOICE PROSTHESIS, SUPPLIES/ACCESSORIES^SP437^V5299
 ;;L8501 TRACHEOSTOMY SPEAKING VALVE, SUPPLIES/ACCES^SP438^L8501
 ;;E1900 AUGMENTATIVE/ALTERNATIVE COM DEVICE^SP439^E1900
 ;;INSTRUMENT SWALLOWING EVAL, LEVEL 2^SP440^92525
 ;;INSTRUMENT SWALLOWING EVAL, LEVEL 3^SP441^92525
 ;;CASE MANAGEMENT V30N^SW017^99499
 ;;HOME HEALTH FLWUP VISIT - V 15N^SW087^G0155
 ;;NONEMERGENCY PT TRANSPORT BY SWER^SW088^A0160
 ;;PHONE D/C FOLW-UP MENTAL HEALTH - V 15N^SW089^90899
 ;;PSYCHIATRIC DIAGNOSTIC INTERVIEW - V 15N^SW090^90801
 ;;CASE MANAGEMENT V45N^SW091^99499
 ;;QUIT
