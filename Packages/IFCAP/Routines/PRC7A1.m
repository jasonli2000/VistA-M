PRC7A1 ;WISC/PLT-PRC7A continued ; 06/15/93  11:29 AM
V ;;4.0;IFCAP;;9/23/93
C421A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRCF(421,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C421B(DA)
 QUIT
C421B(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 S A=$$DECODE^PRCBES1(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C421A2(X) ;FILE 421.2
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRCF(421.2,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C421B2(DA)
 QUIT
C421B2(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 S A=$$DECODE^PRCFAES1(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_"(0^6)",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 S A=$$DECODE^PRCFAES2(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_"(0^9)",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C421A5(X) ;FILE 421.5
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRCF(421.5,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C421B5(DA)
 QUIT
C421B5(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 S A=$$DECODE^PRCFDES1(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_"(2^12)",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 S A=$$DECODE^PRCFDES2(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_"(2^13)",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C423A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRCF(423,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C423B(DA)
 QUIT
C423B(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 S A=$$DECODE^PRCFES1(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C443A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRC(443,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C443B(DA)
 QUIT
C443B(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 S A=$$DECODE^PRCHES11(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . I PRCOP=2 S X=$P($G(^PRC(443,DA,0)),"^",5)+0 D:X>0
 .. W:$P($G(^PRC(443,DA,0)),"^",14) !,$J(DA_",0^5",15),?35,$P($G(^VA(200,X,0)),"^",1)
 .. W:$P($G(^PRC(443,DA,0)),"^",14)<1 !,$J(DA,",0^5",15),?35,$P($G(^DIC(16,X,0)),"^",1)
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C410A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRCS(410,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C410B(DA)
 QUIT
C410B(DA) ;ENTRY POINT TO COUNT/DECODE ONE RECORD
 NEW D1
 ;CONVERT FIELD 63
 S A=$$DECODE^PRCSC4(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_",100",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 ;CONVERT FIELD 44.8
 S A=$$DECODE^PRCSC3(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_",7^9",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 ;CONVERT FIELD 44.5
 S A=$$DECODE^PRCSC1(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_",7^6",15),?35,A
 . I PRCOP=2 S X=$P($G(^PRCS(410,DA,7)),"^",1)+0 D:X>0
 .. W:$P($G(^PRCS(410,DA,7.1)),"^",3) !,$J(DA_",7^1",15),?35,$P($G(^VA(200,X,0)),"^",1)
 .. W:$P($G(^PRCS(410,DA,7.1)),"^",3)<1 !,$J(DA_",7^1",15),?35,$P($G(^DIC(16,X,0)),"^",1)
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 ;CONVERT FIELD 29.5
 S A=$$DECODE^PRCSC2(DA) D:A]""
 . W:PRCOP=2 !,$J(DA_",4^10",15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
C442A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRC(442,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C442B^PRC7A2(DA)
 QUIT
