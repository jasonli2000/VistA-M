PRC7A2 ;WISC/PLT-PRC7A1 continued ; 05/10/93  11:10 AM
V ;;4.0;IFCAP;;9/23/93
C442A(X) ;COUNT/DECODE RANGE OF RECORDS - X?.N1"-".N
 N BEGIN,END,DA,A
 S BEGIN=$P(X,"-"),END=$P(X,"-",2)
 S DA=BEGIN-1
 F  S DA=$O(^PRC(442,DA)) Q:'DA  Q:DA>END  I $D(^(DA,0)) D C442B(DA)
 QUIT
C442B(DA) ;FILE 442
 NEW D1
 ;FIELD .05
 S D1=0 F  S D1=$O(^PRC(442,DA,13,D1)) Q:'D1  D
 . S A=$$DECODE^PRCHES0(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("13,"_D1,15),?35,A
 .. I PRCOP=2 S X=$P($G(^PRCS(442,DA,13,D1,0)),"^",5)+0 D:X>0
 ... W:$P($G(^PRCS(442,DA,13,D1,0)),"^",14) !,$J(DA_",0^5",15),?35,$P($G(^VA(200,X,0)),"^",1)
 ... W:$P($G(^PRCS(442,DA,13,D1,0)),"^",14)<1 !,$J(DA_",0^5",15),?35,$P($G(^DIC(16,X,0)),"^",1)
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 .QUIT
 ;FIELD .6
 S D1=0 F  S D1=$O(^PRC(442,DA,11,D1)) Q:'D1  D
 . S A=$$DECODE^PRCHES1(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("11,"_D1_"(W)",15),?35,A
 .. I PRCOP=2 S X=$P($G(^PRCS(442,DA,11,D1,0)),"^",18)+0 D:X>0
 ... W:$P($G(^PRCS(442,DA,11,D1,1)),"^",11) !,$J(DA_",0^18",15),?35,$P($G(^VA(200,X,0)),"^",1)
 ... W:$P($G(^PRCS(442,DA,11,D1,1)),"^",11)<1 !,$J(DA_",0^18",15),?35,$P($G(^DIC(16,X,0)),"^",1)
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 . S A=$$DECODE^PRCHES2(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("11,"_D1_"(R)",15),?35,A
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 . S A=$$DECODE^PRCHES3(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("11,"_D1_"(L)",15),?35,A
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 . QUIT
 ;FIELD 2.4
 S D1=0 F  S D1=$O(^PRC(442,DA,10,D1)) Q:'D1  D
 . S A=$$DECODE^PRCHES4(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("10,"_D1,15),?35,A
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 .QUIT
 ;FIELD 16.5
 S A=$$DECODE^PRCHES5(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 ;FIELD 50
 S D1=0 F  S D1=$O(^PRC(442,DA,6,D1)) Q:'D1  D
 . S A=$$DECODE^PRCHES6(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("6,"_D1,15),?35,A
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 . S A=$$DECODE^PRCHES7(DA,D1) D:A]""
 .. W:PRCOP=2 !,$J(DA,15),$J("6,"_D1,15),?35,A
 .. S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 .. QUIT
 . QUIT
 ;FIELD 105
 S A=$$DECODE^PRCHES8(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 ;FIELD 114
 S A=$$DECODE^PRCHES9(DA) D:A]""
 . W:PRCOP=2 !,$J(DA,15),?35,A
 . S PRCCT(PRCFNA)=$G(PRCCT(PRCFNA))+1
 . QUIT
 QUIT
