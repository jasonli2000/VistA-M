RMPRPST1 ;HISC/RVD - POST INIT FOR SHIPPING CONVERSION;5/18/98
 ;;3.0;PROSTHETICS;**30**,MAY 18,1998
 W !,$C(7),"Invalid Entry......"
 Q
START ;
 S U="^"
 D XREF^RMPRSE2
 W !!,"***** CONVERTING SHIPPING entries for file #660...."
 F I=2971001:0 S I=$O(^RMPR(660,"B",I)) Q:I'>0  F J=0:0 S J=$O(^RMPR(660,"B",I,J)) Q:J'>0  S RMDAT0=$G(^RMPR(660,J,0)) D:RMDAT0
 .S RMTYP=$P(RMDAT0,U,4),RMFRM=$P(RMDAT0,U,13),RMSRC=$P(RMDAT0,U,14)
 .I RMTYP="",(RMSRC=""),(RMFRM=14) D PROC
 W !!!,$C(7),"***** FILE #660 SHIPPING CONVERSION IS DONE!!!!"
KILL K I,J,RMIEN,RMPAT,RMSCAT,RMFRM,RMDAT0,RMDATAM,RMCHK,RMTYP,RMGRP,RMSRC
 Q
 ;
PROC ;get GROUPER and set missing data.
 S RMDATAM=$G(^RMPR(660,J,"AM"))
 S RMGRP=$G(^RMPR(660,J,"AMS")) D:RMGRP
 .S RMIEN=$O(^RMPR(660,"AG",RMGRP,0))
 .I RMIEN S RMCHK=$G(^RMPR(660,RMIEN,"AM")),RMPCAT=$P(RMCHK,U,3),RMSCAT=$P(RMCHK,U,4),RMDATAM="^^"_RMPCAT_"^"_RMSCAT
 S $P(RMDAT0,U,4)="X",$P(RMDAT0,U,14)="C"
 S ^RMPR(660,J,0)=RMDAT0,^RMPR(660,J,"AM")=RMDATAM
 Q
