DGYZST2 ;ALB/MIR - COUNTY CODES UPDATES FOR PUERTO RICO AND VIRGIN ISLANDS ; 19 SEP 91
 ;;MAS VERSION 5.1;;**8**;
 ;
 ;This routine includes all the county code changes for PUERTO RICO
 ;(state code 72) and VIRGIN ISLANDS (state code 78).
 ;
 ;
 ;Numeric Line tag = state number
 ;Text at Line tag = name of state
 ;Other text lines = Name^old county code^new county code^obsolete?
 ;  (the 4th piece will be an asterisk [*] if code is obsolete)
 ;
 F DGCD=66,72,78 D ADD
Q K DA,DGCD,DGLN,DIC,DIE,DIK,DR,IFN,NODE,X,Y
 Q
 ;
ADD ;add new states and new counties, if applicable
 W !!,">>>Now updating the county code entries for ",$P($P($T(@DGCD),";;",2),"^",1)," (state code ",DGCD,")..."
 S Y="" I '$D(^DIC(5,"C",DGCD)) S NODE=$P($T(@DGCD),";;",2),X=$P(NODE,"^",1),DIC(0)="L",DIC("DR")="1////^S X=$P(NODE,""^"",2);2////^S X=DGCD",DIC="^DIC(5," S:'$D(^DIC(5,DGCD)) DINUM=DGCD K DD,DO D FILE^DICN
 I +Y>0 W !?3,"...",X," added as new state (VA STATE CODE ",DGCD,")"
 K DINUM F IFN=0:0 S IFN=$O(^DIC(5,"C",DGCD,IFN)) Q:'IFN  S:'$D(^DIC(5,IFN,1,0)) ^(0)="^5.01I^^" F DGLN=1:1 S NODE=$P($T(@DGCD+DGLN),";;",2) Q:NODE="QUIT"  D COUNTY
 Q
 ;
 ;
COUNTY ;if county exists, change.  if not, add
 I $D(^DIC(5,IFN,1,"C",$P(NODE,"^",3))),($P(NODE,"^",4)'="*") Q
 S DA=$O(^DIC(5,IFN,1,"C",$P(NODE,"^",2),0))
 I $D(^DIC(5,IFN,1,+DA,0)),($P(NODE,"^",4)'="*") S DIE="^DIC(5,"_DGCD_",1,",DA(1)=DGCD,DR=".01///^S X=$P(NODE,""^"",1);2////^S X=$P(NODE,""^"",3)" D ^DIE W !?5,"...",$P(NODE,"^",1)," is now county code ",$P(NODE,"^",3) Q
 I $D(^DIC(5,IFN,1,+DA,0)),($P(NODE,"^",4)="*") S DIK="^DIC(5,"_IFN_",1,",DA(1)=IFN D ^DIK W !?5,"...",$P(NODE,"^",1)," removed as a selectable county" Q
 I $P(NODE,"^",4)="*" Q
 S DIC="^DIC(5,"_IFN_",1,",DIC(0)="L",X=$P(NODE,"^",1),DA(1)=IFN D ^DIC S DA=+Y
 I DA>0 S DIE=DIC,DR="2////^S X=$P(NODE,""^"",3)" D ^DIE
 W !?5,"...",$P(NODE,"^",1)," added as a new county (VA COUNTY CODE ",$P(NODE,"^",3),")"
 Q
 ;
 ;
66 ;;GUAM^GU
 ;;GUAM^999^010
 ;;QUIT
 ;
72 ;;PUERTO RICO^PR
 ;;CULEBRA^500^049
 ;;VIEQUES^501^147
 ;;ADJUNTAS^601^001
 ;;AGUADA^602^002
 ;;AGUADILLA^603^005
 ;;RAMEY AFB^604^999^*
 ;;AGUAS BUENAS^607^007
 ;;AGUIRRO^608^999^*
 ;;AIBONITO^609^009
 ;;ANASCO^610^011
 ;;ANGELES^611^999^*
 ;;ARECIBO^612^013^*
 ;;ARECIBO^613^013
 ;;ARROYO^615^015
 ;;BARCELONETA^617^017
 ;;BAJADERO^616^999^*
 ;;BARRANQUITAS^618^019
 ;;BAYAMON^619^021^*
 ;;BAYAMON GARDENS^620^021^*
 ;;BAYAMON^621^021
 ;;BOQUERON^622^999^*
 ;;CABO ROJO^623^023
 ;;CAGUAS^625^025
 ;;CAGUAS^626^025^*
 ;;CAMUY^627^027
 ;;CAROLINA^628^031^*
 ;;CANOVANAS^629^029
 ;;CAROLINA^630^031
 ;;CASTANER^631^999^*
 ;;CATANO^632^033
 ;;CAYEY^633^035^*
 ;;CAYEY^634^035
 ;;CEIBA^635^037
 ;;CENTRAL SAN VICENTE^636^999^*
 ;;CENTRAL SOLLER^637^999^*
 ;;CIALES^638^039
 ;;CIDRA^639^041
 ;;COAMO^640^043
 ;;COLOSO^641^999^*
 ;;COMERIO^642^045
 ;;COROZAL^643^047
 ;;COTO LAUREL^644^999^*
 ;;CULEBRA^645^049^*
 ;;DORADO^646^051
 ;;ENSENADA^647^999^*
 ;;FAJARDO^648^053
 ;;FLORIDA^650^054
 ;;FORTUNA^651^999^*
 ;;GARROCHALES^652^999^*
 ;;GUANICA^653^055
 ;;GUAYAMA^654^057
 ;;GUAYANILLA^656^059
 ;;GUAYNABO^657^061
 ;;GURABO^658^063
 ;;HATILLO^659^065
 ;;HORMIGUEROS^660^067
 ;;HUMACAO^661^069
 ;;ISABELA^662^071
 ;;JAYUYU^664^073
 ;;JUANA DIAZ^665^075
 ;;JUNCOS^666^077
 ;;LAJAS^667^079
 ;;LA PLATA^668^999^*
 ;;LARES^669^081
 ;;LAS MARIAS^670^083
 ;;LAS PIEDRAS^671^085
 ;;LOIZA^672^087
 ;;LUQUILLO^673^089
 ;;MANATI^701^091
 ;;MARICAO^706^093
 ;;MAUNABO^707^095
 ;;MAYAGUEZ^708^097
 ;;MERCEDITA^715^999^*
 ;;MOCA^716^099
 ;;MOROVIS^717^101
 ;;NAGUABO^718^103
 ;;NARANJITO^719^105
 ;;OROCOVIS^720^107
 ;;PALMER^721^999^*
 ;;PATILLAS^723^109
 ;;PENUELAS^724^111
 ;;PONCE^731^113
 ;;PONCE^732^113^*
 ;;PUERTO REAL^740^999^*
 ;;PUNTA SANTIAGO^741^999^*
 ;;QUEBRADILLAS^742^115
 ;;RINCON^743^117
 ;;RIO BLANCO^744^999^*
 ;;RIO GRANDE^745^119
 ;;ROSARIO^746^999^*
 ;;SABANA GRANDE^747^121
 ;;SABANA HOYOS^748^999^*
 ;;SABANA SECA^749^999^*
 ;;SAINT JUST^750^999^*
 ;;SALINAS^751^123
 ;;SAN ANTONIO^752^999^*
 ;;SAN GERMAN^753^125
 ;;SAN LORENZO^754^129
 ;;SAN SEBASTIAN^755^131
 ;;SANTA ISABEL^757^133
 ;;TOA ALTA^758^135
 ;;TOA BAJA^759^137
 ;;TRUJILLO ALTO^760^139
 ;;UTUADO^761^141
 ;;VEGA ALTA^762^143
 ;;VEGA BAJA^763^145
 ;;VIEQUES^765^147^*
 ;;VILLALBA^766^149
 ;;YABUCOA^767^151
 ;;YAUCO^768^153
 ;;YUQUIYU^769^999^*
 ;;VIRGIN ISLAND^800^999^*
 ;;CHARLOTTE AMALIE^801^999^*
 ;;CHRISTIANSTED^820^999^*
 ;;CRUZ BAY^830^999^*
 ;;FREDERIKSTED^840^999^*
 ;;KINGSHILL^850^999^*
 ;;SAN JUAN^900^127
 ;;PUERTO RICO^999^999^*
 ;;QUIT
 ;
 ;
78 ;;VIRGIN ISLANDS^VI
 ;;CHARLOTTE AMALIE^801^030^*
 ;;CHRISTIANSTED^820^010^*
 ;;CRUZ^830^020^*
 ;;FREDERIKSTED^840^010^*
 ;;KINGSHILL^850^010^*
 ;;VIRGIN ISLANDS^999^999^*
 ;;ST. CROIX^000^010
 ;;ST. JOHN^000^020
 ;;ST. THOMAS^000^030
 ;;ALL OTHER^000^999
 ;;QUIT
