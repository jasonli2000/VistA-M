A1BFVER ;ALBANY ISC ; ECF ; 1 MAR93 2:03 PM [ 05/21/93  10:28 AM ]
 ;;V1.0
EN ;Called by input transform on fields 2 and 3 of file 11601
ACC(A1BFCODE) ;Check access code
 N X,X1,X2 S U="^",A1BFXX=1
 I '$D(^A1BF(11601,1,0)) S A1BFXX=0 G EXIT
 S A1BFZZ=$P(^A1BF(11601,1,0),U,2) I A1BFZZ="" S A1BFXX=0 G EXIT
 S X=A1BFCODE S X1=$A("@"),X2=$A("\")
 D ^XUSHSH I '$D(^VA(200,"A",X)) S A1BFXX=0 G EXIT
 K A1BFZZ,A1BFCODE
 Q A1BFXX
VER(A1BFCODE) ;Check verify code
 N X,X1,X2 S U="^",A1BFXX=1
 I '$D(^A1BF(11601,1,0)) S A1BFXX=0 G EXIT
 S A1BFZZ=$P(^A1BF(11601,1,0),U,2) I A1BFZZ="" S A1BFXX=0 G EXIT
 I '$D(^VA(200,A1BFZZ,0)) S A1BFXX=0 G EXIT
 I '$D(^VA(200,A1BFZZ,.1)) S A1BFXX=0 G EXIT
 I '$L($P(^VA(200,A1BFZZ,.1),U,2)) S A1BFXX=0 G EXIT
 S X=A1BFCODE S X1=$A("+"),X2=$A("}")
 D ^XUSHSH I $P(^VA(200,A1BFZZ,.1),U,2)'=X S A1BFXX=0 G EXIT
 K A1BFZZ,A1BFCODE
 Q A1BFXX
EXIT ;
 K A1BFZZ,A1BFCODE
 Q A1BFXX
