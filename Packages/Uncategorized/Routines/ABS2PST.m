ABS2PST ;VAMC ALTOONA/CTB - PATCH INSTALLATION POST INIT FOR ABSV*4*6 ;8/31/95  4:26 PM
V ;;4.0;VOLUNTARY TIMEKEEPING;**6**;JULY 6, 1994
 ;BEGIN LOOP THROUGH MASTER TRANSACTION
 N PERCENT,MIN,SEC,TIME,DX,DY,HOURS,TREC,LREC,LINE,DA,LASTENT,XPOS,A,BTIME,XCOUNT,COUNT,CURSOR,MESSAGE,RTIME,NOCOUNT
 W @IOF
 S TREC=$P(^ABS(503331,0),"^",4)+$P(^ABS(503335,0),"^",4) Q:TREC=0
 S MESSAGE="UPDATING FILES 503331 AND 503335.  ITEMS BEING PROCESSED = TRANSACTIONS"
 S NOCOUNT=1
 D BEGIN^ABSVU3
 S DA=0
 F  D  S XCOUNT=XCOUNT+COUNT D:'$D(ZTQUEUED) PERCENT^ABSVU3 Q:'DA
 . F COUNT=1:1:LREC S DA=$O(^ABS(503331,DA)) Q:'DA  I $D(^ABS(503331,DA,0)) S $P(^(0),"^",9)=""
 . QUIT
 S DA=0
 F  D  S XCOUNT=XCOUNT+COUNT D:'$D(ZTQUEUED) PERCENT^ABSVU3 Q:'DA
 . F COUNT=1:1:LREC S DA=$O(^ABS(503335,DA)) Q:'DA  I $D(^ABS(503335,DA,0)) S $P(^(0),"^",13)="",$P(^(0),"^",15)=""
 . QUIT
 K X S $P(X," ",40)=""
 W !!!!,"100% complete."_$P(X," ",1,40),!
 D KILL^%ZISS
 K ^ABS(503331,"AH")
 K ^ABS(503335,"AG")
 K ^ABS(503335,"AM")
 QUIT
 QUIT
 ;
OT ;OPTION TERMINATED
 S X="  <Option Terminated, No Action Taken.>*" D MSG^ABSVQ
 Q
