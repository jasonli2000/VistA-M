AXAREM1 ;WPB/CAM  use in the routine field in file 811.9 for reminders
 ;;1.0;;4/27/99
REM14(DFN,TEST,DATE,VALUE,TEXT) ;SBP<140
 S AA=0,BB=0=0
        S DATE=DT
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM14A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM14A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/") S:CC<140 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM14A K ^TMP("LRRR",$J)
 Q
REM15(DFN,TEST,DATE,VALUE,TEXT) ;SBP>139
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM15A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM15A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/") S:CC>139 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM15A K ^TMP("LRRR",$J)
 Q
REM16(DFN,TEST,DATE,VALUE,TEXT) ;SBP>159
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM16A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM16A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/") S:CC>159 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM16A K ^TMP("LRRR",$J)
 Q
REM17(DFN,TEST,DATE,VALUE,TEXT) ;SBP<160
 S AA=0,BB=0=0
 S DATE=DT
 S TEXT=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM17A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM17A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/") S:CC<160 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM17A K ^TMP("LRRR",$J)
 Q
REM18(DFN,TEST,DATE,VALUE,TEXT) ;SBP<180
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM18A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM18A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/") S:CC<180 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM18A K ^TMP("LRRR",$J)
 Q
REM19(DFN,TEST,DATE,VALUE,TEXT) ;DBP<80
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM19A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM19A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC<80 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM19A K ^TMP("LRRR",$J)
 Q
REM20(DFN,TEST,DATE,VALUE,TEXT) ;DBP<85
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM20A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM20A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC<85 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM20A K ^TMP("LRRR",$J)
 Q
REM21(DFN,TEST,DATE,VALUE,TEXT) ;DBP<90
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(121.5,"AA",DFN,1,AA)) G:AA="" REM20A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM21A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC<90 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM21A K ^TMP("LRRR",$J)
 Q
REM22(DFN,TEST,DATE,VALUE,TEXT) ;DBP>89
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM22A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM22A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC>89 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM22A K ^TMP("LRRR",$J)
 Q
REM23(DFN,TEST,DATE,VALUE,TEXT) ;DBP>109
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM23A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM23A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC>109 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM23A K ^TMP("LRRR",$J)
 Q
REM24(DFN,TEST,DATE,VALUE,TEXT) ;DBP<100
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM24A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM24A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC<100 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM24A K ^TMP("LRRR",$J)
 Q
REM25(DFN,TEST,DATE,VALUE,TEXT) ;DBP<110
 S AA=0,BB=0=0
 S DATE=DT
 S TEST=0
 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) G:AA="" REM25A S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) G:BB="" REM25A S CC=$P(^GMR(120.5,BB,0),"^",8),CC=$P(CC,"/",2) S:CC<110 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
REM25A K ^TMP("LRRR",$J)
 Q
REM26(DFN,TEST,DATE,VALUE,TEXT) ;Last 3 SBP>139 or DBP>89 anyone of the last 3
 S TEST=0,COUNT=0
 S DATE=DT
 S TEST=0
 F AA=0:0 S AA=$O(^GMR(120.5,"AA",DFN,1,AA)) Q:AA=""  Q:COUNT>2  F BB=0:0 S BB=$O(^GMR(120.5,"AA",DFN,1,AA,BB)) Q:BB=""  D
 .S EE=$P(^GMR(120.5,BB,0),"^",8),CC=$P(EE,"/"),DD=$P(EE,"/",2)
 .;W !,CC," ",DD
 .S COUNT=COUNT+1
 .S:CC>139 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^") S:DD>89 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
 K ^TMP("LRRR",$J)
 Q
REM27(DFN,TEST,DATE,VALUE,TEXT) ;GLUCOSE<100 OR >120
 N SUB,SDATE,EDATE
 S DATE=DT
 S TEST=0
 S SDATE=DT
 S X1=DT,X2=-7300 D C^%DTC S EDATE=X
 S SUB="CH"
 S TEST=1388
 D RR^LR7OR1(DFN,,SDATE,EDATE,SUB)
 S TEST=0
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  I BB="N" K ^TMP("LRRR",$J,DFN,"CH",AA,BB)
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  S CC=$P(^TMP("LRRR",$J,DFN,"CH",AA,BB),"^",2) S:CC<100&(CC>0) TEST=1 S:CC>120 TEST=1 D
 .I TEST=1 S FDATE=$P(^GMR(120.5,BB,0),"^")
 K ^TMP("LRRR",$J)
 Q
REM28(DFN,TEST,DATE,VALUE,TEXT) ;CREATININE>1.3
 N SUB,SDATE,EDATE
 S DATE=DT
 S SDATE=DT
 S X1=DT,X2=-7300 D C^%DTC S EDATE=X
 S SUB="CH"
 S TEST=1386
 D RR^LR7OR1(DFN,,SDATE,EDATE,SUB)
 S TEST=0
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  I BB="N" K ^TMP("LRRR",$J,DFN,"CH",AA,BB)
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  S CC=$P(^TMP("LRRR",$J,DFN,"CH",AA,BB),"^",2) S:CC>1.3 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
 K ^TMP("LRRR",$J)
 Q
REM29(DFN,TEST,DATE,VALUE,TEXT) ;POTASSIUM>4.9
 N SUB,SDATE,EDATE
 S DATE=DT
 S SDATE=DT
 S X1=DT,X2=-7300 D C^%DTC S EDATE=X
 S SUB="CH"
 S TEST=1392
 D RR^LR7OR1(DFN,,SDATE,EDATE,SUB)
 S TEST=0
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  I BB="N" K ^TMP("LRRR",$J,DFN,"CH",AA,BB)
 F AA=0:0 S AA=$O(^TMP("LRRR",$J,DFN,"CH",AA)) Q:AA=""  Q:TEST=1  F BB=0:0 S BB=$O(^TMP("LRRR",$J,DFN,"CH",AA,BB)) Q:BB=""  S CC=$P(^TMP("LRRR",$J,DFN,"CH",AA,BB),"^",2) S:CC>4.9 TEST=1,FDATE=$P(^GMR(120.5,BB,0),"^")
 K ^TMP("LRRR",$J)
 Q
REM30(DFN,TEST,DATE,VALUE,TEXT) ;BMI<30.0
 N HDATE,RESULT,WDATE
 S DATE=DT
 S TEST=$$OBESE^AXAOBESE(DFN,30,.RESULT)
 I $D(WDATE) S FDATE=WDATE
 Q
