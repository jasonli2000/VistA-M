RJPTF50C ;RJ WILM DE -MAKE C501 PTF CARD; 12-12-85
 ;;4.0
 S RJNEXT=0 F K=1:1 S RJNEXT=$N(^DGPT(I,"M",RJNEXT)) Q:RJNEXT'?.N  S RJN501="C501("_K_")" D N50X
 K D,L,J,K,X,Y,Z,RJPTF,RJN501,RJ502,RJN502,RJNEXT,RJN503 Q
N50X S RJPTF=^DGPT(I,"M",RJNEXT,0),Z=$P(RJPTF,"^",10),Y=$P(^DIC(42.4,$P(RJPTF,"^",2),0),"^",1),Y=$N(^DIC(42.4,"B",Y,0)) S:$L(Y)=1 Y="0"_Y
 S @RJN501=$E(Z,4,7)_$E(Z,2,3)_Y_"  ",Y=$P(RJPTF,"^",3),X=2 D LJ1 S @RJN501=@RJN501_Y,Y=$P(RJPTF,"^",4) D LJ1 S @RJN501=@RJN501_Y
 S @RJN501=@RJN501_$P(^DPT(RJ,57),"^",4),X=6,RJ502=@RJN501 F Z=5:1:9 S Y=$P(RJPTF,"^",Z) D DX,D,LJ S @RJN501=@RJN501_Y
 S Z=" " I $D(^DGPT(I,"M",RJNEXT,460000)) S Z=$P(^(460000),"^",1)
 S @RJN501="C501"_RJCON_@RJN501_Z S Y=@RJN501,X=80 D LJ S @RJN501=Y Q
LJ F J=$L(Y):1:X S Y=Y_" "
 Q
LJ1 F J=$L(Y):1:X S Y="0"_Y
 Q
D Q:Y'["."  S D="" F J=1:1:$L(Y) S:$E(Y,J)'="." D=D_$E(Y,J)
 S Y=D Q
DX Q:Y=""  S Y=$P(^ICD9(Y,0),"^",1) Q
