ZZAUG97 ;TEST lock module for memory leaks
 ;
 S NUMLOOP=2
 S I=100,LOOP=0
 F J=1000000:1:1009000 S ^%AUGIE(J,J)=J ;MAKE A SCRATCH GLOBAL
LP F  S I=$O(^PSRX(I)) Q:$E(I,$L(I),$L(I))=2  D  ;DO MORE
 .S LOOP=LOOP+1
 .F J=1:1:100 L ^%AUGIE(1000000+J)
 .L  ;CLEAR THE LOCKS
 .D CALC
 .F P=1:1:100 L +^%AUGIE(1000000+P)
 .D CALC
 .F Q=1:1:100 L -^%AUGIE(1000000+Q)
 .D CALC
 .S ^%AUGIE("TRACK",LOOP)=$H
 .I LOOP>(NUMLOOP) Q  ;LOOP MANY TIMES
 .G LP
CALC ;DO A CALCULATION
 S X=$R(300)*3.1415/2.718
 Q
