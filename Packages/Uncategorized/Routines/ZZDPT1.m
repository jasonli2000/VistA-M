ZZDPT1 ;CHECKS FOR MATCH BETWEEN XREF SSN AND SSN IN PAT RECORD
 ;IF MULT RECORDS WITH SAME SSN STORES IN ^UTILITY($J,"DUPS",SSN)
 ;IF NO PAT NODE, STORES IN ^UTILITY($J,"NONODE",SSN)
 ;IF NO MATCH BETWEEN XREF AND PATIENT NODE, STORES IN ^UTILITY($J,"NOMATCH",SSN)
 ;
EN ;
 S (N,N1)=""
 F I=0:0 S N=$O(^DPT("SSN",N)) Q:N=""  S COUNT=0 F J=0:0 S N1=$O(^DPT("SSN",N,N1)) Q:N1=""  S COUNT=COUNT+1 D CHECKS
 Q
CHECKS ;
 I COUNT>1 S ^UTILITY($J,"DUPS",N,N1)=""
 I '$D(^DPT(N1,0)) S ^UTILITY($J,"NONODE",N,N1)="" Q
 I $P(^DPT(N1,0),"^",9)'=N S ^UTILITY($J,"NOMATCH",N,N1)=""
 Q
